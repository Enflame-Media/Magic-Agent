name = "happy-admin"
main = "src/worker/index.ts"
compatibility_date = "2025-01-08"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Account ID
account_id = "81f483e6767ea3194467ecef42840f79"

# No build command needed for the worker itself
# Vue.js SPA is built separately via yarn build:app
[build]
command = ""

# Static assets (Vue.js SPA)
# This serves the built Vue.js app from ./dist
[site]
bucket = "./dist"

#############################
# Development Environment
#############################
[env.dev]
name = "happy-admin-dev"
vars = { ENVIRONMENT = "development" }
routes = [
    { pattern = "happy-admin-dev.enflamemedia.com", custom_domain = true }
]

# No D1 or Secrets needed - happy-admin-api handles all backend functionality
# This worker only serves static Vue.js SPA files

[env.dev.observability]
[env.dev.observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true

#############################
# Production Environment
#############################
[env.prod]
name = "happy-admin-prod"
vars = { ENVIRONMENT = "production" }
routes = [
    { pattern = "happy-admin.enflamemedia.com", custom_domain = true }
]

# No D1 or Secrets needed - happy-admin-api handles all backend functionality
# This worker only serves static Vue.js SPA files

[env.prod.observability]
[env.prod.observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true
